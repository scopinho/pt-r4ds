# Introdu√ß√£o {#sec-intro}

```{r}
#| echo: false

source("_common.R")
```

Ci√™ncia de dados √© uma √°rea emocionante que permite que voc√™ transforme dados brutos em compreens√£o, *insights* e conhecimento.
O objetivo do livro "R para Ci√™ncia de Dados" √© ajudar voc√™ a aprender as ferramentas mais importantes em R que permitir√£o que voc√™ realize ci√™ncia de dados de forma eficiente e reprodut√≠vel, e se divirta ao longo do caminho üòÉ.
Ap√≥s a leitura deste livro, voc√™ ter√° as ferramentas necess√°rias para enfrentar uma ampla variedade de desafios de ci√™ncia de dados usando as melhores partes do R.

## O que voc√™ aprender√°

A ci√™ncia de dados √© um campo vasto, e n√£o √© poss√≠vel domin√°-la lendo apenas um √∫nico livro.
Este livro tem como objetivo fornecer a voc√™ uma base s√≥lida nas ferramentas mais importantes e conhecimento suficiente para encontrar os recursos necess√°rios para aprender mais quando for preciso.
Nosso modelo das etapas de um projeto t√≠pico de ci√™ncia de dados se parece com @fig-ds-diagram.

```{r}
#| label: fig-ds-diagram
#| echo: false
#| fig-cap: |
#|   Em nosso modelo do processo de ci√™ncia de dados, voc√™ come√ßa com a importa√ß√£o
#|   e organiza√ß√£o dos dados. Em seguida, voc√™ entende seus dados por meio de um ciclo iterativo de
#|   transforma√ß√£o, visualiza√ß√£o e modelagem. Voc√™ finaliza o ciclo
#|   comunicando seus resultados para outras pessoas.
#| fig-alt: |
#|   Um diagrama que exibe o ciclo de ci√™ncia de dados: Importar -> Organizar (Tidy) -> Compreender
#|   (com as fases Transformar -> Visualizar -> Modelar em um ciclo) ->
#|   Comunicar. Em torno de todas essas etapas est√° a etapa de Comunicar.
#| out.width: NULL

knitr::include_graphics("diagrams/data-science/base.png", dpi = 270)
```

Primeiro, voc√™ deve **importar** seus dados para o R.
Isso geralmente significa que voc√™ pega dados armazenados em um arquivo, um banco de dados ou uma *API* (interface de programa√ß√£o de aplica√ß√£o, ou ***A**pplication **P**rogramming **I**nterface* em ingl√™s) da web e importa em uma tabela (*data frame*) no R.
Se voc√™ n√£o conseguir importar seus dados para o R, n√£o poder√° fazer ci√™ncia de dados com eles!

Depois de importar seus dados, √© uma boa ideia **organiz√°-los** .  
Organizar seus dados significa armazen√°-los em uma forma consistente que corresponda √† sem√¢ntica do conjunto de dados com a forma como ele √© armazenado.
Em resumo, quando seus dados est√£o organizados de forma *tidy*, cada coluna √© uma vari√°vel e cada linha √© uma observa√ß√£o.
Dados organizados (*tidy data*) s√£o importantes porque a estrutura consistente permite que voc√™ concentre seus esfor√ßos em responder perguntas sobre os dados, em vez de lutar para colocar os dados na forma correta para usar diferentes fun√ß√µes.

Depois de ter dados organizados, normalmente o pr√≥ximo passo √© **transform√°-los**.
A transforma√ß√£o inclui focar em observa√ß√µes de interesse (como todas as pessoas em uma cidade ou todos os dados do √∫ltimo ano), criar novas vari√°veis que s√£o fun√ß√µes de vari√°veis existentes (como calcular a velocidade a partir da dist√¢ncia e do tempo) e calcular um conjunto de estat√≠sticas resumidas (como contagens ou m√©dias).
Juntos, organizar e transformar s√£o chamados de **manipula√ß√£o de dados** (em ingl√™s: *data wrangling*) porque colocar seus dados em uma forma natural de trabalhar frequentemente parece uma luta! (*wrangle*)

Uma vez que voc√™ tenha dados organizados e com as vari√°veis de que precisa, existem duas principais fontes de gera√ß√£o de conhecimento: visualiza√ß√£o e modelagem.
Essas t√™m pontos fortes e fracos complementares, portanto, qualquer an√°lise de dados real ir√° iterar entre elas muitas vezes.

**Visualiza√ß√£o** √© uma atividade fundamentalmente humana.
Uma boa visualiza√ß√£o mostrar√° coisas que voc√™ n√£o esperava ou levantar√° novas quest√µes sobre os dados.
Uma boa visualiza√ß√£o tamb√©m pode sugerir que voc√™ est√° fazendo a pergunta errada ou que precisa coletar dados diferentes.
As visualiza√ß√µes podem surpreender voc√™, mas n√£o escalam particularmente bem porque exigem que um ser humano as interprete.

**Modelos** s√£o ferramentas complementares √† visualiza√ß√£o.
Depois de tornar suas perguntas suficientemente precisas, voc√™ pode usar um modelo para respond√™-las.
Os modelos s√£o fundamentalmente ferramentas matem√°ticas ou computacionais, ent√£o geralmente escalam bem.
Mesmo quando n√£o o fazem, geralmente √© mais barato comprar mais computadores do que comprar mais c√©rebros!
No entanto, cada modelo faz suposi√ß√µes, e, por sua pr√≥pria natureza, um modelo n√£o pode questionar suas pr√≥prias suposi√ß√µes.
Isso significa que um modelo n√£o pode, fundamentalmente, surpreend√™-lo.

A √∫ltima etapa da ci√™ncia de dados √© a **comunica√ß√£o**, uma parte absolutamente cr√≠tica de qualquer projeto de an√°lise de dados.
N√£o importa o qu√£o bem seus modelos e visualiza√ß√µes tenham ajudado voc√™ a entender os dados, a menos que voc√™ tamb√©m possa comunicar seus resultados para outras pessoas.

Em torno de todas essas ferramentas est√° a programa√ß√£o.
A programa√ß√£o √© uma ferramenta abrangente que √© usada em quase todas as partes de um projeto de ci√™ncia de dados.
N√£o √© necess√°rio ser uma pessoa especialista em programa√ß√£o para ter sucesso na ci√™ncia de dados, mas aprender mais sobre programa√ß√£o compensa, pois se tornar melhor em programa√ß√£o permite automatizar tarefas comuns e resolver novos problemas com maior facilidade.

Voc√™ usar√° essas ferramentas em todos os projetos de ci√™ncia de dados, mas para a maioria deles, elas n√£o s√£o suficientes.
H√° uma regra aproximada de 80/20 em jogo: voc√™ pode abordar cerca de 80% de cada projeto usando as ferramentas que aprender√° neste livro, mas precisar√° de outras ferramentas para lidar com os 20% restantes.
Ao longo deste livro, indicaremos recursos onde voc√™ pode aprender mais.

## Como este livro est√° organizado

A descri√ß√£o anterior das ferramentas da ci√™ncia de dados est√° organizada aproximadamente de acordo com a ordem em que voc√™ as utiliza em uma an√°lise (embora, √© claro, voc√™ v√° iterar por elas v√°rias vezes).
Em nossa experi√™ncia, no entanto, aprender primeiro a importa√ß√£o e organiza√ß√£o de dados n√£o √© a melhor escolha, porque essas tarefas s√£o, 80% do tempo, rotineiras e entediantes, e nos outros 20% do tempo, s√£o estranhas e frustrantes.
Esse n√£o √© um bom ponto de partida para aprender um novo assunto!
Em vez disso, come√ßaremos com a visualiza√ß√£o e transforma√ß√£o de dados que j√° foram importados e organizados.
Dessa forma, quando voc√™ importar e organizar seus pr√≥prios dados, sua motiva√ß√£o permanecer√° alta, porque voc√™ sabe que o esfor√ßo vale a pena.

Dentro de cada cap√≠tulo, procuramos seguir um padr√£o consistente: come√ßar com alguns exemplos motivadores para que voc√™ possa entender o panorama geral e, em seguida, aprofundar nos detalhes.
Cada se√ß√£o do livro √© acompanhada de exerc√≠cios para ajudar voc√™ a praticar o que aprendeu.
Embora possa ser tentador pular os exerc√≠cios, a melhor maneira de aprender √© praticando com problemas reais.

## O que voc√™ n√£o aprender√°

Existem v√°rios t√≥picos importantes que este livro n√£o aborda.
Acreditamos que √© importante manter um foco rigoroso no essencial para que voc√™ possa come√ßar o mais r√°pido poss√≠vel.
Isso significa que n√£o √© poss√≠vel, neste livro, abordar todos os t√≥picos importantes.

### Modelagem

A modelagem √© extremamente importante para a ci√™ncia de dados, mas √© um t√≥pico amplo e, infelizmente, n√£o temos espa√ßo suficiente para abord√°-lo adequadamente aqui.
Para aprender mais sobre modelagem, recomendamos fortemente o livro [Tidy Modeling with R](https://www.tmwr.org), escrito por nossos colegas Max Kuhn e Julia Silge.
O livro [Tidy Modeling with R](https://www.tmwr.org) ensinar√° a voc√™ a fam√≠lia de pacotes tidymodels, que, como voc√™ pode imaginar pelo nome, compartilha muitas conven√ß√µes com os pacotes do tidyverse que usamos neste livro.

### Big data

Este livro orgulhosamente e principalmente foca em conjuntos de dados pequenos e que cabem na mem√≥ria (*in-memory*).
Este √© o lugar certo para come√ßar, porque voc√™ n√£o poder√° lidar com *big data* a menos que j√° tenha experi√™ncia com bases de dados pequenas.
As ferramentas que voc√™ aprender√° ao longo da maior parte deste livro lidar√£o facilmente com centenas de megabytes de dados e, com um pouco de cuidado, voc√™ geralmente poder√° us√°-las para trabalhar com alguns gigabytes de dados.
Tamb√©m mostraremos como obter dados de bancos de dados e arquivos parquet, ambos frequentemente usados para armazenar *big data*.
Voc√™ n√£o necessariamente conseguir√° trabalhar com o conjunto de dados inteiro, mas isso nem sempre √© um problema, pois, em muitos casos, voc√™ s√≥ precisa de um subconjunto ou uma amostra para responder √† pergunta que te interessa.

Se voc√™ est√° rotineiramente lidando com dados maiores (digamos, de 10 a 100 GB), recomendamos aprender mais sobre o pacote [data.table](https://github.com/Rdatatable/data.table).
N√£o o ensinamos aqui porque ele usa uma interface diferente do tidyverse e requer que voc√™ aprenda algumas conven√ß√µes diferentes.
No entanto, ele √© incrivelmente mais r√°pido, e o retorno no desempenho compensa o tempo investido para aprender a us√°-lo, se voc√™ estiver trabalhando com *big data*.

### Python, Julia e outros

Neste livro, voc√™ n√£o aprender√° nada sobre Python, Julia ou qualquer outra linguagem de programa√ß√£o √∫til para a ci√™ncia de dados.
Isso n√£o √© porque achamos que essas ferramentas s√£o ruins.
Elas n√£o s√£o!
E, na pr√°tica, a maioria das equipes de ci√™ncia de dados usa uma combina√ß√£o de linguagens, muitas vezes pelo menos R e Python.
Mas acreditamos firmemente que √© melhor dominar uma ferramenta de cada vez, e R √© um √≥timo ponto de partida.

## Pr√©-requisitos

Fizemos algumas suposi√ß√µes sobre o que voc√™ j√° deveria saber para aproveitar ao m√°ximo este livro.
Voc√™ deve ter uma compreens√£o geral de matem√°tica e √© √∫til se voc√™ j√° tiver alguma experi√™ncia b√°sica em programa√ß√£o.
Se voc√™ nunca programou antes, pode achar o livro [Hands on Programming with R](https://rstudio-education.github.io/hopr/), escrito por Garrett, um recurso valioso para complementar este livro.

Voc√™ precisar√° de quatro coisas para executar os c√≥digos deste livro: R, RStudio, um conjunto de pacotes R chamado **tidyverse** e alguns outros pacotes.
Pacotes s√£o as unidades fundamentais de c√≥digo R reprodut√≠vel.
Eles incluem fun√ß√µes reutiliz√°veis, documenta√ß√£o que descreve como us√°-los e dados de exemplo.

### R

Para baixar o R, acesse o CRAN, o **c**omprehensive **R** **a**rchive **n**etwork, em <https://cloud.r-project.org>.
Uma nova vers√£o principal do R √© lan√ßada anualmente, e h√° 2-3 lan√ßamentos menores a cada ano.
√â uma boa ideia atualizar regularmente.
A atualiza√ß√£o pode ser um pouco complicada, especialmente para as vers√µes principais que exigem que voc√™ reinstale todos os seus pacotes, mas adi√°-la s√≥ torna as coisas piores.
Recomendamos o R 4.2.0 ou posterior para este livro.

### RStudio

O RStudio √© uma *IDE* (ambiente de desenvolvimento integrado), para programa√ß√£o em R, que voc√™ pode baixar em <https://posit.co/download/rstudio-desktop/>.
O RStudio √© atualizado algumas vezes por ano e ele o informar√° automaticamente quando uma nova vers√£o estiver dispon√≠vel, portanto, n√£o √© necess√°rio verificar periodicamente.
√â uma boa ideia atualizar regularmente para aproveitar os recursos mais recentes e melhorados.
Para este livro, certifique-se de ter pelo menos o RStudio 2022.02.0.

Quando voc√™ inicia o RStudio, @fig-rstudio-console, voc√™ ver√° duas partes principais na interface: o painel de console (*Console*) e o painel de sa√≠da (*Output*).
Por enquanto, tudo o que voc√™ precisa saber √© que voc√™ digita o c√≥digo R no *Console* e pressiona Enter para execut√°-lo.
Voc√™ aprender√° mais √† medida que avan√ßarmos![^intro-1]

[^intro-1]: Se voc√™ deseja uma vis√£o abrangente de todos os recursos do RStudio, consulte o Guia de uso do RStudio em <https://docs.posit.co/ide/user>.

```{r}
#| label: fig-rstudio-console
#| echo: false
#| out-width: ~
#| fig-cap: |
#|   O RStudio possui duas partes principais: digite o c√≥digo em R no Console
#|   √† esquerda e procure o painel Plots dentro do painel Output √† direita.
#| fig-alt: |
#|   O RStudio com os pain√©is Console e Output destacados.
knitr::include_graphics("diagrams/rstudio/console.png", dpi = 270)
```

### O tidyverse

Voc√™ tamb√©m precisar√° instalar alguns pacotes do R.
Um **pacote** do R √© uma cole√ß√£o de fun√ß√µes, dados e documenta√ß√£o que estende as capacidades do R base.
O uso de pacotes √© fundamental para o uso bem-sucedido do R.
A maioria dos pacotes que voc√™ aprender√° neste livro faz parte do chamado tidyverse.
Todos os pacotes no tidyverse compartilham uma filosofia comum de dados e programa√ß√£o em R e s√£o projetados para funcionar juntos.

Voc√™ pode instalar o tidyverse completo com uma √∫nica linha de c√≥digo:

```{r}
#| eval: false

install.packages("tidyverse")
```

Em seu computador, digite essa linha de c√≥digo no console e pressione Enter para execut√°-la.
O R far√° o download dos pacotes do CRAN e os instalar√° em seu computador.

Voc√™ n√£o poder√° usar as fun√ß√µes, objetos ou arquivos de ajuda de um pacote at√© carreg√°-lo com `library()`.
Depois de instalar um pacote, voc√™ pode carreg√°-lo usando a fun√ß√£o `library()`:

```{r}
library(tidyverse)
```

Isso informa que o tidyverse carrega nove pacotes: dplyr, forcats, ggplot2, lubridate, purrr, readr, stringr, tibble, tidyr.
Esses s√£o considerados o **n√∫cleo** do tidyverse porque voc√™ os usar√° em quase todas as an√°lises.

Os pacotes do tidyverse mudam com bastante frequ√™ncia.
Voc√™ pode verificar se h√° atualiza√ß√µes dispon√≠veis executando `tidyverse_update()`.

### Outros pacotes

Existem muitos outros pacotes excelentes que n√£o fazem parte do tidyverse porque resolvem problemas em um dom√≠nio diferente ou s√£o projetados com um conjunto diferente de princ√≠pios subjacentes.
Isso n√£o os torna melhores ou piores; apenas os torna diferentes.
Em outras palavras, o complemento ao tidyverse n√£o √© o messyverse, mas muitos outros universos de pacotes inter-relacionados.
Conforme voc√™ enfrenta mais projetos de ci√™ncia de dados com R, aprender√° novos pacotes e novas formas de pensar sobre dados.

Usaremos muitos pacotes de fora do tidyverse neste livro.
Por exemplo, usaremos os seguintes pacotes porque eles fornecem conjuntos de dados interessantes para trabalharmos no processo de aprendizado do R:

```{r}
#| eval: false

install.packages(
  c("arrow", "curl", "dados", "duckdb",
    "ggrepel", "ggridges", "ggthemes", "hexbin", "janitor",  
    "leaflet", "maps", "openxlsx", 
    "repurrrsive", "tidymodels", "writexl")
  )
```

Tamb√©m usaremos uma sele√ß√£o de outros pacotes para exemplos isolados.
Voc√™ n√£o precisa instal√°-los agora, apenas lembre-se de que sempre que vir um erro como este:

```{r}
#| eval: false

library(ggrepel)
#> Error in library(ggrepel) : there is no package called ‚Äòggrepel‚Äô
```

Voc√™ precisar√° executar `install.packages("ggrepel")` para instalar o pacote.

## Executando c√≥digo em R

A se√ß√£o anterior mostrou v√°rios exemplos de execu√ß√£o de c√≥digo em R.
O c√≥digo no livro parece assim:

```{r}
#| eval: true
1 + 2
```

Se voc√™ executar o mesmo c√≥digo no seu *console*, ele parecer√° assim:

```         
> 1 + 2
[1] 3
```

Existem duas diferen√ßas principais.
No seu *console*, voc√™ digita ap√≥s o `>`, chamado de **prompt**; n√£o mostramos o prompt no livro.
No livro, a sa√≠da √© comentada com `#>`; no seu *console*, ela aparece diretamente ap√≥s o c√≥digo.
Essas duas diferen√ßas significam que se voc√™ estiver trabalhando com uma vers√£o online do livro, poder√° copiar facilmente o c√≥digo do livro e col√°-lo no *console*.

Ao longo do livro, usamos um conjunto consistente de conven√ß√µes para se referir ao c√≥digo:

-   Fun√ß√µes s√£o exibidas em uma fonte de c√≥digo e seguidas por par√™nteses, como `sum()` ou `mean()`.

-   Outros objetos R (como dados ou argumentos de fun√ß√£o) est√£o em uma fonte de c√≥digo, sem par√™nteses, como `voos` ou `x`.

-   √Äs vezes, para deixar claro de qual pacote um objeto vem, usaremos o nome do pacote seguido por quatro-pontos `::`, como `dplyr::mutate()` ou `dados::voos`.
    Isso tamb√©m √© c√≥digo em R v√°lido.

## Agradecimentos

Este livro n√£o √© apenas o produto de Hadley, Mine e Garrett, mas √© o resultado de muitas conversas (pessoalmente e online) que tivemos com muitas pessoas na comunidade R.
Estamos incrivelmente gratos por todas as conversas que tivemos com todos voc√™s; muito obrigado!

```{r}
#| eval: false
#| echo: false

library(tidyverse)
contribs_all_json <- gh::gh("/repos/:owner/:repo/contributors",
  owner = "hadley",
  repo = "r4ds",
  .limit = Inf
)
contribs_all <- tibble(
  login = contribs_all_json |> map_chr("login"),
  n = contribs_all_json |> map_int("contributions")
)

contribs_old <- read_csv("contributors.csv", col_types = list())
contribs_new <- contribs_all |> anti_join(contribs_old, by = "login")

# Get info for new contributors
needed_json <- map(
  contribs_new$login, 
  ~ gh::gh("/users/:username", username = .x),
  .progress = TRUE
)
info_new <- tibble(
  login = contribs_new$login,
  name = map_chr(needed_json, "name", .default = NA),
  blog = map_chr(needed_json, "blog", .default = NA)
)
info_old <- contribs_old |> select(login, name, blog)
info_all <- bind_rows(info_old, info_new)

contribs_all <- contribs_all |> 
  left_join(info_all, by = "login") |> 
  mutate(login_lowercase = str_to_lower(login)) |>
  arrange(login_lowercase) |>
  select(-login_lowercase)
write_csv(contribs_all, "contributors.csv")
```

```{r}
#| results: asis
#| echo: false
#| message: false

library(dplyr)
contributors <- readr::read_csv("contributors.csv")
contributors <- contributors |> 
  filter(!login %in% c("hadley", "garrettgman", "mine-cetinkaya-rundel")) |> 
  mutate(
    login = paste0("\\@", login),
    desc = ifelse(is.na(name), login, paste0(name, " (", login, ")"))
  )

cat("Este livro foi escrito de forma colaborativa e muitas pessoas contribu√≠ram por meio de pull requests. Um agradecimento especial a todas as ",nrow(contributors), " pessoas que contribu√≠ram com melhorias por meio de pull requests no GitHub (em ordem alfab√©tica pelo nome de usu√°rio): ", sep = "")
cat(paste0(contributors$desc, collapse = ", "))
cat(".\n")
```

## Considera√ß√µes Finais

A vers√£o online deste livro est√° dispon√≠vel em <https://cienciadedatos.github.io/pt-r4ds/>.
O c√≥digo fonte do livro est√° dispon√≠vel em <https://github.com/cienciadedatos/pt-r4ds>.
O livro √© gerado pelo [Quarto](https://quarto.org), que facilita a escrita de livros que combinam texto e c√≥digo execut√°vel.

```{r}
#| eval: false
#| echo: false
#| results: asis

pkgs <- sessioninfo::package_info(
  tidyverse:::tidyverse_packages(),
  dependencies = FALSE
)
df <- tibble(
  package = pkgs$package,
  version = pkgs$ondiskversion,
  source = gsub("@", "\\\\@", pkgs$source)
)
knitr::kable(df, format = "markdown")
```

```{r}
#| include: false

cli:::ruler()
```
